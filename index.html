<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AR体験</title>
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.4.2/dist/aframe.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="startScreen">
    <h1>AR 体験</h1>
    <p>あなたの環境に3Dオブジェクトを表示します。<br>カメラへのアクセスを許可してください。</p>
    <button id="startButton" class="btn btn-primary">
      <i class="fas fa-play"></i> スタート
    </button>
  </div>
  
  <!-- リアルタイムビュー用のvideo -->
  <video id="videoBackground" autoplay muted playsinline></video>
  
  <!-- AR表示用のコンテナ -->
  <div id="arContainer">
    <a-scene 
      embedded
      alpha="true" 
      device-orientation-permission-ui="enabled: false"
      renderer="antialias: true; alpha: true; colorManagement: true;"
      vr-mode-ui="enabled: false">
      <a-camera position="0 1.6 0" look-controls="enabled: false"></a-camera>
      <a-box id="arObject" position="0 1 -3" material="color: #2196F3;" visible="false"></a-box>
    </a-scene>
  </div>
  
  <div id="statusMessage"></div>
  
  <div id="loadingIndicator">
    <div class="spinner"></div>
  </div>
  
  <div class="ui-container">
    <div id="controlPanel">
      <div class="controls">
        <button id="colorSelectBtn" class="btn btn-icon btn-primary">
          <i class="fas fa-palette"></i>
        </button>
        <button id="resetPositionBtn" class="btn btn-icon btn-primary">
          <i class="fas fa-undo"></i>
        </button>
        <button id="switchCameraBtn" class="btn btn-icon btn-primary">
          <i class="fas fa-sync"></i>
        </button>
      </div>
      <button id="enableMotionButton" class="btn btn-success">
        <i class="fas fa-compass"></i> モーションセンサーを有効化
      </button>
    </div>
  </div>
  
  <div id="colorPanel">
    <div class="color-options">
      <div class="color-option" style="background-color: #2196F3;" data-color="#2196F3"></div>
      <div class="color-option" style="background-color: #F44336;" data-color="#F44336"></div>
      <div class="color-option" style="background-color: #4CAF50;" data-color="#4CAF50"></div>
      <div class="color-option" style="background-color: #FFC107;" data-color="#FFC107"></div>
      <div class="color-option" style="background-color: #9C27B0;" data-color="#9C27B0"></div>
    </div>
  </div>
  
  <script src="script.js"></script>
</body>
</html>
